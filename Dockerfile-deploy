FROM node:21-alpine
WORKDIR /usr/src/siehp-api
COPY package*.json ./
COPY . ./
RUN npm ci
RUN npm run build
RUN npx prisma migrate deploy
RUN npx prisma db seed
CMD [ "npm", "run", "start:prod" ]
